---
layout: post
title:  "用户画像 User Persona"
date:   2022-10-24 13:30:00
categories: 数据挖掘
tags: 用户画像 标签 互联网 营销 增长 骚扰电话 分布式 id 雪花 session 用户建模
excerpt: 如何刻画用户特征？用户画像有哪些类别，标签如何构建，怎么使用画像？
author: 鹤啸九天
mathjax: true
permalink: /user
---

* content
{:toc}


# 用户画像

## 什么是用户画像

参考：
- [当我们谈用户画像时，到底在谈什么？](https://www.niaogebiji.com/article-156297-1.html)

描绘一个人时，往往会抓住他最显眼的标签特征，例如双眼皮，长发，圆脸…经过一番描绘，就有了一个人物大致的形象。

### 用户画像历史

现代交互设计之父`Alan Cooper`很早就提出了`Persona`的概念：
> - Personas are a concrete representation of target users.
> - Persona是真实用户的**虚拟代表**，是建立在一系列真实数据之上的**目标用户模型**，用于产品需求挖掘与交互设计。

通过调研和问卷去了解用户，根据他们的目标、行为和观点的差异，将他们区分为不同的类型，然后从每种类型中抽取出典型特征，赋予名字、照片、人口统计学要素、场景等描述，就形成了一个Persona。Persona就是最早对用户画像的定义，随着时代的发展，用户画像早已不再局限于早期的这些维度，但用户画像的核心依然是真实用户的虚拟化表示。

### 用户画像定义

用户画像就是通过`数据标签`构建出来的`用户形象`。
- 品牌通过对**海量数据信息**进行分析，将数据**抽象**成`标签`，再利用这些标签将用户形象**具体化**，最终形成的就是用户画像。

用户画像是指根据用户的基本属性、用户偏好、生活习惯、用户行为等信息而抽象出来的**标签化用户模型**。 [img](https://pic1.zhimg.com/80/v2-f57594d4d072ec6ad85447e3e655a780_1440w.webp)
- ![](https://pic1.zhimg.com/80/v2-f57594d4d072ec6ad85447e3e655a780_1440w.webp)

注意
- 用户画像强调的是一群人，是对群体宏观的把握，体现了群体的**共性**，是在**单一/组合**维度识别下，弱化群体中每个个体的形象与特色，从而聚合的一类用户共有特征。[img](https://www.linkflowtech.com/wp-content/uploads/2022/07/1-4.png)
- ![img](https://www.linkflowtech.com/wp-content/uploads/2022/07/1-4.png)

数据示例

```json
{  
    “ID”: 123456,
    “姓名”: “张建国”,
    “性别”: “男”,
    “出生年月”: 631123200,
    “籍贯”: “北京”,
    “居住地”: “北京”,
    “教育背景”:
        {  
            “学校”:”北京大学”,
            “专业”: “CS”,
            “入学年月”:1220198400
        }
}
```

## 用户画像有什么用

大数据时代，用户画像尤其重要。
- 通过一些手段，给用户的习惯、行为、属性贴上一系列标签，抽象出一个用户的全貌，为广告推荐、内容分发、活动营销等诸多互联网业务提供了可能性。
- 它是计算广告、个性化推荐、智能营销等大数据技术的基础，毫不夸张地说，用户画像是大数据业务和技术的基石。

### 画像的好处

在数据为王的时代
- 精准的用户画像能够清晰划分用户群体及其各自的行为和目标，精确详尽的信息更能帮助品牌就多个用户群体更快达成一致认识，有助于营销效率和服务质量的提升。
- 同时，也可以根据用户画像评判迎合用户需求的好坏程度，衡量设计效率，进而更好地服务用户，提高用户的留存率。

画像的价值主要有：
- 设计前：帮助确立产品定位、目标
- 设计中：帮助确立设计目标、设计策略与准则
- 设计后：促进其他工作，如市场推广、运营活动、销售规划

### 应用案例

用户画像的应用场景十分广泛，可以根据不同业务需求探索出诸多应用场景。
- 1、人群分析
  - 人群分析是用户画像最基础的应用场景之一，运营人员可借助标签深入分析不同用户画像群体的分布特征，又或是不同人群的消费习惯、消费偏好、不同地域的差异分析等，继而基于画像标签产出分析报告，帮助品牌运营人员更加了解行业动态。
- 2、广告优化
  - 在获客成本持续走高的今天，用户画像可谓是优化营销推广的利器之一，不仅可以圈选定位更准确的人群，同时也为素材文案、广告创意提供了更具体的撰写方向，做到精准且有效的投放。此外，用户画像可以助力广告主完成洞察到决策的环节，让投放工作更有目标方向，广告主也可基于标签高效触达目标人群，提升用户体验，实现营销价值的最大化。
- 3、精细化消费者运营
  - 当品牌能够准确构建用户画像时，就可以用来为服务精细化运营了。运营人员可以通过快速分析用户特征，找到不同运营场景下的目标用户，从而精准圈定目标人群，进行更灵活、更有针对性的营销活动和个性化消息推送。

典型应用
- 1、**精准营销**：这是运营最熟悉的玩法，在从粗放式到精细化运营过程中，将用户群体切割成更细的粒度，辅以短信、推送、邮件、活动等手段，驱以关怀、挽回、激励等策略。
- 2、**用户分析**：用户画像也是了解用户的必要补充。产品早期，产品经理们通过用户调研和访谈的形式了解用户。在产品用户量扩大后，调研的效用降低，这时候就可以辅以用户画像配合研究。方向包括新增的用户有什么特征，核心用户的属性是否变化等等。
  - ![](https://pic1.zhimg.com/80/v2-e2c78b4172959d69736d944dc5b82180_1440w.webp)
- 3、**数据应用**：用户画像是很多数据产品的基础，诸如耳熟能详的推荐系统广告系统，广告基于一系列人口统计相关的标签，性别、年龄、学历、兴趣偏好、手机等等来进行投放的。
- 4、**数据分析**：用户画像可以理解为业务层面的数据仓库，各类标签是多维分析的天然要素。数据查询平台会和这些数据打通，最后辅助业务决策。
  - ![](https://pic3.zhimg.com/80/v2-e093e80709f0e59d69b818a52f16d23a_1440w.webp)

参考：
- [数据分析之用户画像方法与实践](https://zhuanlan.zhihu.com/p/54843812)

#### 电话营销

【2025-3-13】做电话销售的公司 **80人**，**50个**电销，每人每天有**350个**电话指标。

针对“骚扰电话”的几种反应：
- 1、**礼貌说，不需要，谢谢**。---- 销售会标记成有希望的，还会再打。
- 2、**与销售对骂！**---- 销售会标记态度不好，你的电话将会被用于**新人心理训练**。
- 3、**耐心听其介绍完毕** ---- 销售以为有希望，还会再打。

100个号码，大概有**10％**的人会**直接挂掉**，销售会标记为**6次**以上都被直接挂断，才不会再打。

所以，直接挂断电话才是最优解。


## 互联网用户

### 用户特点

【2022-10-31】互联网用户具备一些特定的心理特征，如
- 认知通俗、简单，行为冲动、幼稚，情感单纯、极端，自我欣赏（自恋）、自视高尚，期待关注与尊重等
- 其行为也表现出从众与轻信、思维感性与形象化、反应极端与情绪化、感情和行为互相传染等特征。
1. 惯性——打破惯性会发脾气
2. 我就是全部——自我意识很重
3. 第一印象很重要——喜欢证明第一印象的正确性
4. 相信熟人——熟人的意见很重要
5. 简洁——喜欢流程简便、设计简洁的事物
6. 文字图片结合——不图文结合都不会说话了
7. 金钱安全——嗯，钱要放在安全的地方，可疑的网站是不会随便打开的
8. 搜索准确——搜一个，一个准儿
9. 保护私隐——谁想侵犯我私隐，跟谁没完没了

[互联网用户的9个行为特征](https://www.woshipm.com/pmd/186735.html)

[神级“码农女”周倩如，耿直神回复，遭Boss团疯抢](https://www.ixigua.com/6845059522961080846)
- 什么叫做互联网用户，学霸大神女程序员现场解释，小气又没智商
- <iframe width="720" height="405" frameborder="0" src="https://www.ixigua.com/iframe/6845059522961080846?autoplay=0" referrerpolicy="unsafe-url" allowfullscreen  height="600" width="100%"></iframe>


### 用户分群

【2023-5-31】知乎专题：[如何准确地进行「用户分类」？](https://www.zhihu.com/question/20009138/answer/308898738)

#### 按忠诚度划分

互联网用户类型
- 游客：忠诚度几乎没有，在意的是免费使用的价值
- 客户：忠诚度一般，在意使用价值和服务
- 会员：忠诚度高，在意使用价值、服务和参与感
- 粉丝：忠诚度最高，更多的是把自身的情感属性融合到我们的产品当中，视图通过自身的影响力去左右产品的特性

#### 按人群属性划分

很多人在做营销推广或研究用户类型时，喜欢将用户按**年龄、性别、地区或消费心理**特征等来分类。
- 比如一些做健身房的人在营销推广时，喜欢将目标用户（未交钱的）按照**年轻、中年、老人**等多少年龄段来分类，或按照**收入高低**多少来分类等等。

这种方式操作起来很简单，但是并不利于精准营销，还很可能浪费了很多不必要的营销推广费用。
- 因为同样年龄或收入差不多的用户群体，依然存在着巨大差异。
- 比如同样是20岁的女性且收入相同的用户，她们对办一张瑜伽健身卡的意愿程度并不一致：可能有些人想在考虑要不要健身、有些在考虑哪家健身房。

而如果用同样营销方式对待相同分类的用户，营销就不够精准与有效，导致不必要的营销成本浪费。

这种分类方式来营销推广并不够精准与有效。

作者：[怪兽先森](https://www.zhihu.com/question/20009138/answer/308898738)


#### 按需求阶段

更加精准有效的用户分类方法：按照**用户需求的认知阶段**来分类目标用户。

需求的认知阶段指大部分用户对某个需求或产品都有自己的认知阶段，不同的认知阶段，解决的需求也不一样。
- 比如一个女性用户发现自己皮肤变差了，这时候需求认知程度是处于“我为什么皮肤会变差了”的阶段，而如果你对该用户你家的面膜有多好，该用户很可能就会产生反感——因为该用户目前真正的需求认知还没达到“要用哪个产品”的阶段。

所以，根据目标用户需求的认知阶段不同，需要解决的营销问题也不同。

可将目标用户分为五种用户类型：
1. 迷茫型用户
2. 问题型用户
3. 搜寻型用户
4. 评估型用户
5. 决策型用户

![](https://pic1.zhimg.com/80/v2-833e3852e2ab16a2fd4059103f298fbd_1440w.webp)

不同认知阶段的目标用户，分别该解决怎样的营销问题，让营销推广更加精准有效。
- ![](https://picx.zhimg.com/80/v2-0ad2be8ccb0982f351d5c5d05469f052_1440w.webp?source=2c26e567)


详解
1. `迷茫型`用户：该类目标用户**不知道自己的问题是什么**。
  - 比如经常胃口不好，不知道为什么。
  - 对这类的目标用户，具体营销方式是帮用户说出现象的原因和解决方案，再对用户进行下一步的产品推广。
  - 因为当用户得到自己问题的原因后，就会去想“有什么办法解决我的问题？”
  - 比如用户发现自己的胃口不好，营销人在广告文案或其他营销方式中，应该对该类用户的原因进行分析
    - 胃口不好可能是肠胃原因或是其他什么原因等；
  - 然后，提出解决方案，告诉用户肠胃不好应该怎么办。比如，去看医生还是吃什么药等方法。
  - 下一步，才是产品营销推广。比如，告诉用户为什么你的产品更能解决他的问题，凭什么你的产品是该用户最好的选择等（产品卖点展示）。
  - 所以，面对该类目标用户，营销人就不能一上来就介绍产品，而是先解决问题的原因和给出对应的解决方案，再考虑介绍产品卖点。
  - 经验证明，这类用户的**购买产品转化率比较低**，因为从问题识别到决策购买过程，需要解决的问题和该过程遇到同类产品的竞争者都不只一个。
2. `问题型`用户：知道自己的问题，但在寻找问题的解决方法。
  - 知道自己身体的很多症状是由于肥胖的原因，需要去减肥，但是不知道怎么减肥。
  - 对该类标用户，首先要解决的营销问题是——**说出解决方案和产品**。
  - 比如在对想要减肥用户进行广告营销时，告诉用户最适合该用户想要减肥的解决方案是去找一个健身教练；
  - 然后告诉用户你健身房的最大卖点是什么，为什么你健身房里的教练很适合该用户。再比如，对做营销的人或对营销感兴趣的人想要通过碎片时间学习一些营销干货，不知道有什么方式比较好。然后我就告诉该类用户的解决方案和产品是——可通过关注公众号的方式，推荐去微信搜索关注“怪兽先森”公众号；因为这个公众号的文章篇篇都是原创的营销干货，XX营销大神都在推荐的一个号（好了，我的广告打完了^^）。
  - 因此，对于问题型的用户，需要解决的营销问题是说出解决方案和产品，而不再是告诉用户问题的原因是什么。
3. `搜寻型`用户：这个需求认知阶段的用户已进入了**产品锁定**阶段，购买产品的转化率是比较高的。
  - 该类用户的需求认知阶段：**知道自己的问题和答案，还不知道自己该用什么产品**，正处于搜寻产品的过程中。
  - 比如知道自己的皮肤经常出油过多，需要用到护肤品，但是不知道用什么品牌的护肤品。
  - 营销人需要解决的营销问题：说出你的产品和产品的特色卖点。该目标用户为什么选这个产品就够了？比如护肤品，知名的品牌有雅诗兰黛和香奈儿等，用户为什么选你的品牌产品——如，你的护肤产品对油性皮肤很有针对效果且正品、相对其他品牌的护肤品比较优惠等卖点。
  - 前面说的健身房例子也是如此，有些目标用户已经解决了问题的方法是什么的阶段（比如打算选择健身房的私教来帮助减肥的方式），这个时候就不需再强调方法方案，而应该告诉用户为什么你的健身房适合他——如，你这个健身房里的私教是该区域所有健身房中最专业的还是其他什么卖点等。所以，面对知道自己的问题和答案，还不知道自己该用什么产品，正处于搜寻产品的过程的搜寻型用户，应该重点解决的营销问题是你的产品为什么最适合该类用户，产品的特色卖点是什么。
4. `评估型`用户：这个需求认知阶段的用户，已经对产品进行锁定了。假如把握好的话，购买产品的转化率是比第三类的搜寻型用户更高。
  - 这类目标用户的需求认知阶段：**知道自己该买哪个品牌的产品**了，但是不知道这个品牌的**产品值不值得信任**，在评估该品牌产品的犹豫之中。
  - 比如我知道自己应该买小米手机，但是不知道值不值得买，自己对该品牌的一些顾虑还没解决。可能是在担心质量服务问题和售后维修等顾虑与信任问题。面对评估型用户，需要解决的是——品牌的信任等顾虑问题。
  - 可以采用的营销方式，比如可以用信任背书（名人推荐，国家认证，销量高……）或公认事实等方法来打消用户的顾虑问题，促使下单购买。比如再说前面的健身房例子，如果用户打算选择来你的健身房进行减肥健身，但是还在犹豫中——不知道相信你介绍“教练是该区域最专业的”的说法是不是真的，万一骗我怎么办？这就是这个阶段的目标用户最大的顾虑，需要先去解决该类用户的这些顾虑问题，而不是在拼命拉着该类用户快掏钱。所以，对于“评估型”的用户，应该需要解决的营销问题是品牌的信任等顾虑问题。
5. `决策型`用户：离购买转化最近的用户类型，需要好好珍惜和把握！
  - 这类目标用户的需求认知阶段是——知道自己该买哪个品牌了，也知道现在要买了，就是**还差一点促动力**。
  - 比如我要买一个小米6手机，但是不是特别急，在看着现在买可以有什么优惠等信息。
  - 对于该类用户，需要解决的营销问题是——搬出针对用户的优惠和激励措施。
  - 如，现在购买可以买二送一或半折优惠等，而且该优惠是限时或销量等营销方式来用促使用户马上下单，防止就到手的订单或客户的流失（毕竟可以让用户可以到了这一阶段也不容易，要把握好！）。比如像我上次在淘宝买一个耳机，准备提交订单了，但由于支付宝暂时金额不够而没有继续下单。后来过了几天，我收到该店铺发来的短信说这两天搞活动，马上下单可以优惠5元。我就记起了，打开淘宝赶紧下单了。该店铺的一个简单的优惠活动就重新挽回了辛辛苦苦到手的订单。
  - 面对就要购买的“决策型用户”，需要解决的营销问题是如何**让该用户马上下单购买**，防止就到手的订单流失。

营销推广时，对目标用户如果仅仅是按照年龄、地区和收入等来进行分类营销，很多时候并不是最精准有效的分类营销方式。不妨可以按照目标用户“需求的认知阶段”来分类管理，然后针对性解决不同类型用户的营销问题。


## 用户画像结构

### 用户画像概念

用户画像可分为以下两部分
- `User Persona`：用户`角色`，针对用户真实需求虚拟（抽象）出的典型人物角色，比如，住在江浙一带养了宠物的未婚女性；
- `User Profile`：用户`标签`，比如，女性、未婚、有宠物都是具体的用户标签。另一种名称：`User portrait`

#### 用户画像 User persona 

根据Alan Cooper的《About Face》，是基于产品对真实世界的观察，抽象出来的具有代表性的**虚拟用户模型**，有时也被称为`综合用户原型`（Composite User Archetype）。
- 这个概念最早由Alan Cooper在《The Inmates are Running the Asylum》（软件创新之路）一书中提出，后续在多处书籍进行了不停的完善。

这个画像主要特征如下：
- （1）描述一个用户画像包括`角色描述`和`用户目标`
  - `角色描述`是指如名称、年龄、位置、收入、职业等，这类角色描述主要是为了使用户画像更丰富、真实，具象；
  - `用户目标`是其动机, 重点关注的是用户动机。
- （2）可以代表相似的用户**群体**或**类型**，也可以代表**个体**
  - User persona 是抽象的、虚拟的，代表一个典型的用户群体；
  - 虽然也可以代表个体，但个体并不是实际独立的个人，而是从实际观察研究中综合而来。
- （3）须针对具体情境-具体产品的行为和目标
  - User persona 研究的是用户在具体情境下对产品的使用，关注其在一定范围内的行为、态度、能力、动机等。
  - 即使同一个角色，在不同产品下的动机也是有差异的，一般来说不轻易在不同产品间复用，需要考虑不同类产品的切入场景。

#### 数据画像 User portrait (profile)

User Portrait 是指用户信息`标签化`，通过收集用户多维度的信息数据（如人口统计属性、社会属性、行为偏好、消费习惯等），并对其进行统计、分析，从而抽象出的用户信息全貌，相比 user persona，它更侧重于**数据挖掘**、**标签体系**搭建。

这类画像主要特征如下：
- `真实性`：集合了每个个体的真实信息，如既有人口统计属性等**静态**信息，也有用户行为的**动态**信息。
- `时效性`：用户动态信息并非一层不变，可以实时追踪其变化。
- `覆盖度广`：既能监测到用户感兴趣的内容，也可以看到其不感兴趣的内容，维度众多，颗粒度粗细均有。

#### 对比

以下是这2类用户画像的简要差异对比：

|类型|定义|内容|用途|方法|其他|
|---|---|---|---|---|---|
|用户画像 user persona|虚拟的用户横型|用户特征、目标、能力、态度的抽象概括|初期描述目标用户,指导产品设计|定性研究方法||
|数据画像 user portrait|真实的用户数据集|用户实时、真实、动态的行为数据统计用途|后期跟进用户行为，观察、预测用户行为|定量研究方法与数据分析||


### 用户画像七大要素

用户画像的构成通常遵循七大要素，首字母刚好组成`Persona`，每个字母对应一条原则：
- `Primary` （**基本**性）：指该用户角色是否基于对真实用户的情景访谈；
- `Empathy` （**同理**性）：指用户角色中包含姓名、照片和产品相关的描述，该用户角色是否引同理心；
- `Realistic` （**真实**性）：对每天与消费者打交道的人来说，用户画像是否看起来像真实人物；
- `Singular` （**独特**性）：每个用户是否是独特的，彼此很少有相似性；
- `Objectives` （**目标**性）：该用户角色是否包含与产品相关的高层次目标，是否包含关键词来描述该目标；
- `Number` （**数量**性）：用户角色的数量是否足够少，以便我们能记住每个用户角色的姓名，以及其中的一个主要用户角色；
- `Applicable` （**应用**性）：品牌是否能使用用户角色作为一种实用工具进行设计决策.


## 用户画像构建


### 标签化

用户的行为数据**无法直接**用于数据分析和模型训练，也无法从用户的行为日志中直接获取有用的信息。
- 而将用户的行为数据**标签化**以后，对用户就有了一个直观的认识。同时计算机也能够理解用户，将用户的行为信息用于个性化推荐、个性化搜索、广告精准投放和智能营销等领域。[img](https://s2.51cto.com/oss/202107/01/25b95526c3714a36edf27b3feeae935d.png)
- ![](https://s2.51cto.com/oss/202107/01/25b95526c3714a36edf27b3feeae935d.png)

主流的标签体系都是层次化的。首先标签分为几个大类，每个大类再进行逐层细分。
- 在构建标签时，只需要构建最下层的标签，就能够映射出上面两级标签。
- 上层标签都是抽象的标签集合，一般没有实用意义，只有统计意义。
- 例如可以统计有人口属性标签的用户比例，但用户有人口属性标签，这本身对广告投放没有任何意义。[img](https://s5.51cto.com/oss/202107/01/a6477afbf147f47b85a71437419d3ebd.png)
- ![](https://s5.51cto.com/oss/202107/01/a6477afbf147f47b85a71437419d3ebd.png)

用于广告投放和精准营销的一般是**底层标签**，对于底层标签有两个要求：
- 每个标签只能表示一种含义，避免标签之间的重复和冲突，便于计算机处理;
- 标签必须有一定的语义，方便相关人员理解每个标签的含义。

此外，标签的**粒度**也是需要注意的，标签粒度太粗会没有区分度，粒度过细会导致标签体系太过复杂而不具有通用性。

各个大类常见的底层标签。
- **人口**标签：性别、年龄、地域、教育水平、出生日期、职业、星座
- **兴趣**特征：兴趣爱好、使用App/网站、浏览/收藏内容、互动内容、品牌偏好、产品偏好
- **社会**特征：婚姻状况、家庭情况、社交/信息渠道偏好
- **消费**特征：收入状况、购买力水平、已购商品、购买渠道偏好、最后购买时间、购买频次

依据构建的难易程度和各类标签的依存关系，各类标签构建的优先级 [img](https://s3.51cto.com/oss/202107/01/e05f1e4e51be4cb63ad7c52748e08ed3.jpg),[img](https://pic4.zhimg.com/80/v2-73e15400ebaee8877c1e24ee37f27baf_1440w.webp)
- 原始数据 → `事实`标签 → `模型`标签 → `高级`标签
- ![](https://s3.51cto.com/oss/202107/01/e05f1e4e51be4cb63ad7c52748e08ed3.jpg)
- ![](https://pic4.zhimg.com/80/v2-73e15400ebaee8877c1e24ee37f27baf_1440w.webp)

技术差别
- 第一类是**人口属性**，这一类标签比较**稳定**，一旦建立很长一段时间基本不用更新，标签体系也比较固定;
- 第二类是**兴趣属性**，这类标签**随时间变化**很快，标签有很强的**时效性**，标签体系也不固定;
- 第三类是**地理属性**，这一类标签的时效性跨度很大，如GPS轨迹标签需要做到实时更新，而常住地标签一般可以几个月不用更新，所用的挖掘方法和前面两类也大有不同 [img](https://s4.51cto.com/oss/202107/01/93e5306ba2a0adf3f8db094c0020189f.png)
- ![](https://s4.51cto.com/oss/202107/01/93e5306ba2a0adf3f8db094c0020189f.png)

### 画像设计

培训初版画像尽量满足这几个条件：
- （1）便于获取、计算：有现成的数据源，计算方法相对确定
- （2）容易理解：无需过多解释
- （3）原子性：标签、属性之间粒度适中且相对独立
- （4）有潜在业务场景：对培训、任务分发、微聊等有一定价值
- （5）扩展性：兼容其他标签，方便扩展

培训领域画像示例：
- ① 学习态度：区分经纪人在培训产品上重视程度，基于过往培训频次、时长，计算数值，映射到几个区间，如：应付（参与培训1次失败就放弃了）、一般（参与几次培训，分数不理想）、认真（参与几次培训，分数逐渐提升至及格）、重视（参与较多次培训且分数较高）
- ② 学习能力：衡量经纪人培训分数增速，分为：慢、一般、快
- ③ 个性化特征：表达连贯性、普通话标准程度、逻辑性等，跟培训内容关系不大的特征
- ④ 知识掌握程度：对应一系列知识点得分，往图谱方向规划

### 构建方法

用户画像（user persona）多采用定性的研究方法来进行角色划分，主要可采用的资料来源有：
- 人种学研究、情境调查、观察法、访谈法、桌面研究等，具体实行时会根据业务情况稍作调整。

#### 简易流程

主要流程：目标分析、标签体系构建、画像构建
- （1）目标分析：明确用户画像的目标是构建用户画像的第一步，也是设计标签体系的基础。目标分析一般可以分为**业务目标**分析和**可用数据**分析两步。目标分析的结果有两个：
  - ①画像的目标，也就是画像的效果评估标准;
  - ②可用于画像的数据。
  - 画像的目标确立要建立在对数据深入分析的基础上，脱离数据制定的画像目标是没有意义的。
- （2）标签体系构建：画像建模开始之前需要先进行标签体系的制定
  - 注意：标签体系不是一成不变的，随着业务的发展，标签体系也会发生变化。例如电商行业的用户标签，最初只需要消费偏好标签，GPS标签既难以刻画也没有使用场景。随着智能手机的普及，GPS数据变得易于获取，而且线下营销也越来越注重场景化，因此GPS标签也有了构建的意义。
- （3）画像构建
  - 用户标签的刻画是一个长期的工作，不可能一步到位，需要不断地扩充和优化。一次性构建中如果数据维度过多，可能会有目标不明确、需求相互冲突、构建效率低等问题，因此在构建过程中建议将项目进行分期，每一期只构建某一类标签。

#### 复杂流程

以酷家乐-快搭、赢客2条业务线为例，梳理了从0到1构建画像的流程与方法,[img](https://image.woshipm.com/wp-files/2020/12/6SZIyqOU7wAL5KlXe6aQ.png)
- ![](https://image.woshipm.com/wp-files/2020/12/6SZIyqOU7wAL5KlXe6aQ.png)
- Step1：确立目标与画像维度
  - 明确业务目标与用户角色，不同的角色与目标在收集信息时有所差异，进而影响到最终得到的画像结果。因此在做画像之前，需要考虑清楚画像目的。明确目标后，就可以结合目标与角色，制定出画像信息维度。
- Step2：确立调研方法
  - 确立画像信息维度后，需要结合用户、时间精力、经费等因素，选择合适的调研方法以实现信息收集。常用的调研方法有3种：
    - `定性`研究：如访谈法、二手资料研究
    - `定量`研究：如问卷调研、数据分析
    - 定性+定量：上面2种方法的结合。
  - 每种方法如何选择？可以从调研方法的差异性、产品所处生命周期，再结合实际时间精力、经费等情况酌情选择
- Step3：制定计划与数据收集
  - 在明确目标与方法后，需要对整个研究进行细化，制定具体详实的执行计划并落地，把控整体节奏以收集有效的信息。
  - 例如，若使用问卷法，则需要进行问卷设计——被访者选取——问卷投放——问卷回收。若使用访谈法，则需要准备访谈前中后的相关资料。
- Step4：分析资料，角色聚类
  - 第三步骤收集整理到有效信息后，需要识别关键的行为变量，将调研到的用户与行为变量进行一一对应，并识别差异化行为模式。
- Step5：综合特征，产出画像
  - 完成角色聚类后，梳理每类角色的行为、目标、痛点等维度特征，形成画像的基本框架，并对每个角色进行属性信息、场景等详细描述，让画像更加丰满、真实。
- Step6：结合产品，画像落地
  - 用户画像只有落地，助力产品设计，才能体现其价值，否则就是空中楼阁。
  - 在创建完画像后，可以组织分享画像结果，让团队内成员对服务的用户达成共识，进而探讨产品的新机会点或改进点，逐步落地到产品设计、推广营销中。

详情见原文：[构建用户画像的流程与方法](https://www.woshipm.com/user-research/4294590.html)


### 画像示例

用户画像的核心工作就是给用户打标签，标签通常是人为规定的高度精炼的特征标识，如年龄、性别、地域、兴趣等。
- 由这些标签集合能抽象出一个用户的信息全貌，如图所示是某个用户的标签集合，每个标签分别描述了该用户的一个维度，各个维度相互联系，共同构成对用户的一个整体描述。
- ![](https://s6.51cto.com/oss/202107/01/943d6462c718daa6740a834970d2ac15.jpg)


#### 神策数据

[神策数据](https://www.sensorsdata.cn/product/userTag.html)创始人来自百度UDW团队


## 用户画像常见误区

不少品牌都积累了一定体量的数据，着手开始或是已经构建了自己的用户画像体系，但过程中仍存在不少误区
- 1、画像与业务场景的关联度不高
  - 为了筛选出高净值用户，挖掘品牌的更多增长可能性，不少品牌构建了自己的标签体系以及用户画像，以便对用户进行层层筛选，进而开展针对性的精细运营。但这些品牌也仅仅是构建了标签体系，没有基于行业做多维度的拓展。
  - 宠物行业某个品牌此前为用户打上的标签为“男性，30岁，养了猫”，这样的标签显然与业务场景的关联度不高，无法开展后续的精细化运营。
  - 宠物行业的特征是<span style='color:blue'>消费决策者和使用者分离</span>，因此消费者具备**双重角色**——实际**使用者**和购买**决策者**。当宠物的品种、年龄、需求不同，或是主人的人生阶段、社交偏好、陪伴偏好不同时，消费者在宠物身上的花费程度和方式就各不相同，在品类购买跨度上也会有更大的延伸空间。
  - 因此，就需要从`人`、`宠`，`场景`构建和应用标签，紧扣业务场景，才能穷举描述品牌“全域”“全量”的用户。[img](https://www.linkflowtech.com/wp-content/uploads/2022/07/3.jpg)
  - ![](https://www.linkflowtech.com/wp-content/uploads/2022/07/3.jpg)
- 2、重数量、轻质量，认为用户标签越多越好
  - 误区：标签越多越好、越全面越好，试图把整个消费者形象完美复刻出来。标签的数量要符合运营可以负荷的颗粒度，过多的标签只会使得用户信息杂乱无章，效果适得其反。
- 3、不重视标签的维护和更新
  - 用户标签作为构成用户画像的核心因素并非一成不变，而是需要定期进行更新。
  - 运营人员需要结合品牌自身的发展，在一个周期内对这些标签的有用程度、适配度等进行评估，并需要根据时间、场景的变化及时调整。
  - 增加和减少标签也存在着一个稳定的衡量标准，例如设计好一个标签后，发现这种标签下的用户数量较少，并且无法大规模使用，不适用的情况很多，就可以考虑删除。只有做好维护与更新标签这件事，品牌在进行私域运营时才能结合标签内容实现精细化、个性化，进而提升后续的获客和转化。
- 4、没有把握好用户隐私尺度
  - 品牌在构建用户画像过程中也存在较多数据安全问题，例如非法数据采集技术、过度收集用户数据、用户个人数据隐私缺乏保障机制等，尤其在个保法出台后，如果管理不到位、尺度把握不当，反而容易让用户产生隐私权遭到侵犯的不信任感。
  - 品牌应坚守法律法规底线，如对用户数据非必要不收集、非同意不收集，妥善保管数据避免外泄；另一方面，在构建用户画像的过程中也需要将用户的个人数据匿名化，实现关联要素“角色”的切断，防止用户画像“出界”。


## 用户建模


### 用户id

分布式ID 常见解决方案
- UUID: Java自带的生成一串唯一随机36位字符串（32个字符串+4个“-”）的算法。它可以保证唯一性，且据说够用N亿年，但是其业务可读性差，无法有序递增。
- SnowFlake: 雪花算法，Twitter开源的由64位整数组成分布式ID，性能较高，并且在单机上递增。 具体参考：[snowflake](https://github.com/twitter-archive/snowflake)
- UidGenerator: UidGenerator是百度开源的分布式ID生成器，其基于雪花算法实现。 具体参考：[uid-generator](https://github.com/baidu/uid-generator/blob/master/README.zh_cn.md)
- Leaf: 美团开源的分布式ID生成器，能保证全局唯一，趋势递增，但需要依赖关系数据库、Zookeeper等中间件。 具体参考：[MT_Leaf](https://tech.meituan.com/MT_Leaf.html)


### Session 分析意义

用户行为事件往往以“点”的方式呈现： 
- 某人在什么时间什么地点干了一件什么样的事
- 即熟知的 4W1H 模型：Who、When、Where、How、What

>- 小明昨天下午在i百联通过个性化推送买了一双 NIKE 球鞋
>- 张小花今天十点在融 360 上注册后领取了新人基金
>- 某白领晚上六点在五道口区域扫码一辆 ofo 小黄车并报修了它 ……

基于这样用户角度的行为记录，产品方可以知道用户都具体干了什么事情。并对自己的产品做出精细化运营，但是，还有一些需求，是不能通过“点”来描述的，比如：
- 用户平均会来几次？
- 每次平均逛了几个页面？
- 每次来平均待多久？
- 某个具体页面用户平均停留多长时间？

这些需要把用户单点行为串联起来形成一个整体，并在此基础上进行计算后才能得到的数据分析需求，更像是一条“线”。而 Session 分析的最大意义是解决用户分析中的“线”型难题，从不同角度指导精细化运营与商业决策。

### 什么是 Session

- 【2017-6-28】[数据分析方法论：你真的懂 Session（会话） 分析吗？](https://www.woshipm.com/data-analysis/700390.html)
- 【2021-12-7】[Session 分析的妙用](https://www.woshipm.com/data-analysis/5239785.html)

Session 翻译过来是“会话”，用户在APP/小程序/官网等平台上进行浏览/点击/滑动等行为聚合成的序列

Session指用户在产品上的一次连续使用行为，便于追溯分析用户使用效果（使用时长/交互深度/跳出率/用户路径/转化漏斗等）。
- 用户带着需求来，初始意图随着交互的进行，中途会细化、延伸、发散到相关需求上，大部分都围绕一个主意图。
- Session有长有短，意图有多有少

Session 的关键点：多长时间内用户做了什么事。

电商平台购物场景
- 点击/打开客服聊天框时，就进入了和客服的 “会话”
- 用户向客服询问产品的情况或投诉
- 只有用户主动结束和客服的沟通，或在一段时间内我们没有继续向客服发消息时，客服才会发来 “满意度邀请”

此次 “会话” 就结束了。

用户启动 APP 后在 APP 上的一系列操作和互动，也可以看作是用户和 APP 的 “会话”，即使是用户短暂放下手机去做别的事，只要在后面又重新打开 APP 进行操作，此次 “会话” 就没有结束，除非用户离开的时间超过了阈值，“会话” 就会自动结束。


### Session 指标


1. “会话” 个数
2. “会话” 深度
  - [img](https://image.woshipm.com/wp-files/2021/12/KepOkAddPJbjDYY2lQwC.png)
3. “会话” 跳出率
  - [img](https://image.woshipm.com/wp-files/2021/12/SuCcAtyyZeKSKYjPnFLL.png)
4. “会话” 内部各事件的属性

### Session 切分

如何切分session？多个角度判断session是否结束
- 百度搜索以25min无操作为界，分割行为序列
- 高德地图以显性终止行为（发起导航/退出等）+无操作时间窗（最长5min）综合分割行为序列

一般经验：
- Web产品30min为界
- APP产品1min为界
- ![](https://image.woshipm.com/wp-files/2017/06/T4IKlAAG415UXL2S54gf.png)

参考：
- 显性终止行为：回到主页、退出app、新建回话
- 无操作时间窗：5min为界（具体窗口需要统计分析,看窗口分布,意图覆盖）


![](https://image.woshipm.com/wp-files/2021/12/8gtLoXwfbOhdv4XOGjzf.png)

上图中，这个用户
- 上班路上打开了 APP，逛了一会后就退出了 APP。
- 下班回家后打开了 APP，逛了一会后放下手机，用一分钟倒了一杯水，接着回来又打开了 APP 继续浏览，直到最后退出了 APP。

如果简单使用 “打开-退出APP” 作为**行为序列**的切割标准，该用户在上班路上使用 APP 的深度比回家后高
- 可以计算图中从打开 APP 到退出 APP 中出现的 “圆圈” 的个数计算用户从打开到退出过程中与 APP 的互动深度。

但是实际上并不是如此，用户在第一次退出 APP 后只是起身倒了一杯水，并没有结束与 APP 的互动。

如果轻易得出了 “上班时段的使用深度高于回家之后” 的错误结论，将会误导业务同事，严重的话可能会导致其做出错误的决策。

反之，Session 可以将回家后的两段貌似 “割裂的” 行为序列进行合并，从而揭开用户在一段时间内所做的行为和背后的动机。

“切割时间” 概念
- “除非用户离开 APP 的时间超过了阈值，‘会话’ 就会自动结束”，这个 “阈值” 便是 “切割时间”。

例子
- 假设设定切割时间为 5 分钟，那么就代表着如果用户在做了某个行为 5 分钟后没有任何其他动作，前面的 “会话” 便会被 “切割” 并结束。
- 在某些情况下，也可以设置特定的 “会话” 开始和结束事件，一旦用户做了某个操作就会自动开始/结束 “会话”。


### Session 实践

用户行为序列按照id切分，连续行为按时间间隔（如30min）分割，提取关键序列

```python
import datetime
import pandas as pd
import time
import json

def diff_time(a, b):
    """
        计算时间差
    """
    userStart=datetime.datetime.strptime(a,'%Y-%m-%d %H:%M:%S')
    userEnd=datetime.datetime.strptime(b,'%Y-%m-%d %H:%M:%S')
    delta = (userEnd-userStart).seconds
    #print ((userEnd-userStart).days) # 0 天数
    # print (end-start).seconds # 30 秒数
    return delta

def path_result(p):
    """
        路径转化结果
    """ 
    result = '未知'
    # 异常路径矫正
    if p.endswith('命中知识=>识别失败'):
        p = p.strip('=>识别失败')
    # 开始判断
    if p == '进入IM=>初始faq':
        result = '进线无交互'
    elif p.endswith('点击faq=>初始faq'):
        result = '智能解决-FAQ点击'
    elif p.endswith('闲聊'):
        result = '智能解决-闲聊'
    elif p.endswith('答案点赞'):
        result = '智能解决-点赞'
    else:
        result = '其它'
    return result

def print_session(last_info):
    """
        session 输出
    """
    # 计算时间差
    delta = diff_time(last_info['start_time'], last_info['end_time'])
    last_info['duration'] = delta
    #print('\t','\n\t'.join(['\t'.join(map(str,i)) for i in last_info['path']]))
    # 计算全局统计信息
    steps = len(last_info['path'])
    turns = len([i for i in last_info['path'] if i[0]=='用户'])
    # 关键路径
    path_long = '=>'.join([i[4] for i in last_info['path']]) # 完整路径
    path_short = '=>'.join([i[4].split('(')[0] for i in last_info['path']]) # 精简路径
    result = path_result(path_short) # 转化结果
    #output_format = ['会话id','人工会话id','sessionid','开始时间','结束时间', '持续时长','总步数','用户发言数','关键路径-精简','关键路径-完整','转化结果']
    cur_list = [last_info['conversationid'], last_info['dialogid'], last_info['bot_dialogid'], last_info['human_dialogid'], 
                last_info['start_time'], last_info['end_time'], last_info['duration'],
                steps, turns, path_short, path_long, result]
    #print('\t'.join(map(str, cur_list)))
    output_list.append(cur_list)
    #print('-'*100)

type_info = {
    10001:'普通文本', # im_cloud_text
    10006:'语音', # im_cloud_audio
    10007:'定位', # im_cloud_location
    10008:'系统', # im_cloud_system
    10009:'链接', # im_cloud_link
    20000:'消息隐藏', # fe_hidden_message
    40001:'会话开始', # start_conversation_type
    40002:'会话结束', # end_conversation_type
}
# 数据读取
raw_pd = pd.read_excel('data.xlsx')

guess_dict = {}
output_list = []
faq_click = {}
output_format = ['cur_dialogid','bot_dialogid','human_dialogid','start_time','end_time', 'duration','total_steps','utterance_num','path_short','path_long','result']
last_info = {'dialogid':'-','path':[],'start_time':'-','end_time':'-', 'duration':0, 'turns':0, 'guess_dict':[]}
debug = False #True
cnt_info = {'line':0, 'dialogid':0}
#for i,r in df.iloc[:100,:].iterrows():
for i,r in raw_pd.iterrows(): # 务必排序，否则出现个别顺序混乱; type排序为了保证意图识别
    if debug: # 调试信息
        if r['type'] == 41001:
            print(r['dialogid'],r['角色'],r['type'],r['time'],r['发送方'],r['接收方'],r['fromuserid'],'省略')
        else:
            print(r['dialogid'],r['角色'],r['type'],r['time'],r['发送方'],r['接收方'],r['fromuserid'],r['content'])
    cnt_info['line'] += 1
    # 以 dialogueid 为准，切分会话序列
    if r['dialogid'] != last_info['dialogid']:
        # session 分割条件：dialogid变化，且，当前非接通人工会话
        cnt_info['dialogid'] += 1
        # session切换，输出上一个列表
        if last_info['dialogid'] != '-': # 非第一个session
            print_session(last_info)
        last_info = {'dialogid':r['dialogid'],'bot_dialogid':r['dialogid'], 'human_dialogid':'-','path':[],'start_time':'-','end_time':'-', 'duration':0, 'turns':0, 'guess_dict':[]}
    # 同一个session：添加session序列
    if last_info['start_time'] == '-':
        last_info['start_time'] = r['time']
    if r['time'] > last_info['end_time']:
        last_info['end_time'] = r['time']
    # type识别，得到关键动作action机器参数信息（括号里面）
    action = '-'
    if r['type'] == 10001:
        pass
    elif r['type'] == 10003: 
        action = '输入图片消息'
        tmp_info = json.loads(r['content'])
    elif r['type'] == 43001: # 用户发视频
        action = '输入视频消息'
    elif r['type'] == 40008: # 【高置信度】机器人请求知识点答案
        action = '命中知识'
        content_info = json.loads(r['content'])
        action += '{}-{}-{})'.format(knowledge_id, knowledge_name, '内容省略')
    elif r['type'] == 41001: # 初始推荐faq
        action = '初始faq'
        faq_info = json.loads(r['content'])
        faq_dict = {} # 初始化FAQ列表
        for idx, item in enumerate(faq_info['faqList']):
            faq_dict[item['question']] = [idx, 'B', item['id'], item['knowledgeId'], item.get('answer','null')]
    else:
        action = type_info.get(r['type'], '未知-{}'.format(r['type']))
    # 追加动作序列
    last_info['path'].append([r['角色'], r['type'], r['time'], r['发送方'], action, r['content'],r['extmap']])
# 最后一个session
print_session(last_info)
```


### 行为建模

【2025-3-29】 用户行为建模（`UBM`）广泛应用于推荐系统（`RS`），在用户兴趣学习中占据着
- 推荐系统研究的主要痛点在于缺乏用户偏好的显式反馈。用户兴趣偏好更多隐含记录在粗糙且有噪音的行为日志中

通过挖掘用户与物品之间的关键交互模式，能够在推荐任务中带来较大的提升。
- 论文：[A Survey on User Behavior Modeling in Recommender Systems]()

UBM分类体系分为四个方向：
- **传统**用户行为建模（Conventional UBM）
  - 从简单历史行为序列中学习**用户兴趣表征**， 单一行为类型 single type (如点击，下载)历史。
  - 首先将用户行为历史Hu处理为固定长度的**时序物品序列**(一般进行padding，然后sequence_mask)，随后从多个维度分析用户复杂行为模式，包括session结构、行为粒度(粗粒度，marco-behavior，micro-behavior)与影响范围 以及物品间的依赖关系(比如i2i相似度计算，就是通过)。
- **长序列**用户行为建模（Long-Sequence UBM）
  - 通过学习**更长**的用户行为序列（至少千级规模）保留更多行为记录，使模型能够挖掘更丰富的长期用户兴趣，但深度模型处理超长序列面临计算瓶颈。为此，研究者提出两种解决方案：
    - 采用存储增强方法来存储长距离行为依赖
    - 行为检索方法筛选与目标相关的行为历史，也就是GSU，有hard-GSU和soft-GSU；
- **多类型**用户行为建模（Multi-Type UBM）， 用户行为的多样性
  - 在统一推荐模型中**显式建模**不同行为类型（如点击、购买），为细粒度理解行为模式和关联关系提供新视角，比如ESSM2就是通过分析不同的用户行为，并找到不同行为之间的转化率；
- **带辅助信息**的用户行为建模（UBM with Side Information）： 把itemId 泛化到属性序列上

更多: [用户行为序列建模汇总](https://mp.weixin.qq.com/s/dcBLx6dRxGYFQHzO6uAlWQ)





# 结束
